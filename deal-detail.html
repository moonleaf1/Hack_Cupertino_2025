<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Deal Details - GrabNGo</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Quicksand&family=Tangerine&display=swap" rel="stylesheet">

    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Quicksand', sans-serif;
        }

        #header-placeholder {
            margin: 0;
            padding: 0;
        }

        .content {
            padding: 20px;
        }

        .deal-detail-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .deal-detail-card {
            width: 60%;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .deal-detail-card img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 8px;
        }

        .deal-title {
            font-size: 24px;
            font-weight: bold;
            margin: 15px 0;
        }

        .deal-store {
            font-size: 20px;
            color: #555;
            margin-bottom: 20px;
        }

        .deal-description {
            font-size: 16px;
            color: #333;
            margin-bottom: 20px;
        }

        .deal-price {
            font-size: 20px;
            color: #4CAF50;
            margin-bottom: 20px;
        }

        .quantity-container {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .quantity-container input {
            width: 40px;
            padding: 5px;
            margin-right: 10px;
            text-align: center;
            font-size: 14px;
        }

        .add-to-cart-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
        }

        .add-to-cart-btn:hover {
            background-color: #45a049;
        }

        .back-to-browse-btn {
            background-color: #007BFF;
            color: white;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 20px;
        }

        .back-to-browse-btn:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

<div id="header-placeholder"></div>

<div class="content">
    <h1>Deal Details</h1>

    <div class="deal-detail-container" id="deal-detail-container">
        <!-- Deal detail will go here -->
    </div>

    <!-- Back to browse button -->
    <button class="back-to-browse-btn" onclick="goBackToBrowse()">Back to Browse</button>
</div>

<script>
    // Insert header
    fetch('header.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('header-placeholder').innerHTML = data;
      });

    // Get deal ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const dealId = parseInt(urlParams.get('id'));

    // Sample deals
    const deals = [
        { id: 1, title: "Fresh Apples", store: "Green Market", image: "https://source.unsplash.com/featured/?apples", description: "Freshly picked apples from local farms.", price: "$2.99" },
        { id: 2, title: "Bakery Bread", store: "Daily Breads", image: "https://source.unsplash.com/featured/?bread", description: "Freshly baked, soft and delicious bread.", price: "$1.50" },
        { id: 3, title: "Organic Milk", store: "Farm Fresh", image: "https://source.unsplash.com/featured/?milk", description: "Organic milk sourced directly from local farms.", price: "$3.49" },
        { id: 4, title: "Juicy Strawberries", store: "Berry Good", image: "https://source.unsplash.com/featured/?strawberries", description: "Sweet and juicy strawberries, perfect for snacking.", price: "$5.00" },
        { id: 5, title: "Homemade Cookies", store: "Sweet Treats", image: "https://source.unsplash.com/featured/?cookies", description: "Delicious homemade cookies, fresh out of the oven.", price: "$3.99" },
        { id: 6, title: "Cheddar Cheese", store: "Cheesy Delights", image: "https://source.unsplash.com/featured/?cheese", description: "Rich and creamy cheddar cheese, perfect for sandwiches.", price: "$4.49" },
        { id: 7, title: "Rotisserie Chicken", store: "Roast House", image: "https://source.unsplash.com/featured/?chicken", description: "Juicy rotisserie chicken, fully cooked and ready to eat.", price: "$7.99" },
        { id: 8, title: "Local Honey", store: "Bee Farm", image: "https://source.unsplash.com/featured/?honey", description: "Sweet and pure honey from local bees.", price: "$6.00" },
        { id: 9, title: "Ripe Bananas", store: "Fruit Haven", image: "https://source.unsplash.com/featured/?bananas", description: "Ripe, sweet bananas, perfect for smoothies.", price: "$1.99" },
        { id: 10, title: "Crispy Lettuce", store: "Veggie World", image: "https://source.unsplash.com/featured/?lettuce", description: "Crisp and fresh lettuce, perfect for salads.", price: "$2.49" }
    ];

    // Find the selected deal by ID
    const selectedDeal = deals.find(deal => deal.id === dealId);

    // Display the deal details
    const container = document.getElementById('deal-detail-container');
    if (selectedDeal) {
        const detailCard = document.createElement('div');
        detailCard.className = 'deal-detail-card';

        detailCard.innerHTML = `
            <img src="${selectedDeal.image}" alt="${selectedDeal.title}">
            <div class="deal-title">${selectedDeal.title}</div>
            <div class="deal-store">${selectedDeal.store}</div>
            <div class="deal-description">${selectedDeal.description}</div>
            <div class="deal-price">${selectedDeal.price}</div>
            <div class="quantity-container">
                <input type="number" id="quantity-${selectedDeal.id}" min="1" value="1">
            </div>
            <button class="add-to-cart-btn" onclick="addToCart(${selectedDeal.id})">Add to Cart</button>
        `;

        container.appendChild(detailCard);
    } else {
        container.innerHTML = "<p>Deal not found.</p>";
    }

    // Add to cart function
    function addToCart(id) {
        const quantity = document.getElementById(`quantity-${id}`).value;
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        const deal = deals.find(d => d.id === id);
        deal.quantity = quantity; // Store quantity
        cart.push(deal);
        localStorage.setItem('cart', JSON.stringify(cart));
        alert(`${deal.title} x${quantity} added to cart!`);
    }

    // Go back to browse section
    function goBackToBrowse() {
        window.location.href = 'browse.html'; // Update this to the URL of your browse section
    }
</script>

</body>
</html>